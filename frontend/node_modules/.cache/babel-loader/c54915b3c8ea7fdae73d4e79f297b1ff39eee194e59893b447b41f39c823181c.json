{"ast":null,"code":"var _jsxFileName = \"D:\\\\Usuarios\\\\FRANCO\\\\Desktop\\\\parroquav3\\\\frontend\\\\src\\\\components\\\\Modals\\\\ListaPermisos.js\",\n  _s = $RefreshSig$();\n// src/components/Modals/ListaPermisos.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Check } from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { PERMISOS as PERMISOS_LOCAL, ETIQUETAS_PERMISOS } from '../../constants/permissions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ListaPermisos = ({\n  value = [],\n  onChange,\n  columnas = 2,\n  disabled = false\n}) => {\n  _s();\n  const {\n    authFetch\n  } = useAuth();\n  const [catalogo, setCatalogo] = useState(PERMISOS_LOCAL);\n  useEffect(() => {\n    let cancelado = false;\n    const cargar = async () => {\n      try {\n        const resp = await authFetch('http://localhost:5000/api/permissions');\n        if (!resp.ok) return; // fallback a local\n        const data = await resp.json();\n        if (!cancelado && Array.isArray(data.permissions)) {\n          const norm = data.permissions.map(p => {\n            if (typeof p === 'string') return p;\n            if (p && typeof p === 'object') return p.id || p.name || '';\n            return '';\n          }).filter(Boolean);\n          setCatalogo(norm);\n        }\n      } catch (_) {\n        // fallback silencioso a constantes locales\n      }\n    };\n    cargar();\n    return () => {\n      cancelado = true;\n    };\n  }, [authFetch]);\n  const lista = useMemo(() => catalogo.map(id => ({\n    id,\n    nombre: ETIQUETAS_PERMISOS[id] || id\n  })), [catalogo]);\n  const toggle = id => {\n    if (disabled) return;\n    if (value.includes(id)) onChange === null || onChange === void 0 ? void 0 : onChange(value.filter(x => x !== id));else onChange === null || onChange === void 0 ? void 0 : onChange([...(value || []), id]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `grid grid-cols-1 md:grid-cols-${columnas} gap-2`,\n    children: lista.map(perm => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-3 border-2 rounded-lg cursor-pointer transition-all ${value.includes(perm.id) ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'} ${disabled ? 'opacity-60 cursor-not-allowed' : ''}`,\n      onClick: () => toggle(perm.id),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0 mt-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-5 h-5 rounded border-2 flex items-center justify-center ${value.includes(perm.id) ? 'bg-blue-600 border-blue-600' : 'border-gray-300'}`,\n            children: value.includes(perm.id) && /*#__PURE__*/_jsxDEV(Check, {\n              className: \"w-3 h-3 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium text-gray-900\",\n            children: perm.nombre\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)\n    }, perm.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(ListaPermisos, \"yHgLVvoWhWICuYRNuqpzrwLjGpY=\", false, function () {\n  return [useAuth];\n});\n_c = ListaPermisos;\nexport default ListaPermisos;\nvar _c;\n$RefreshReg$(_c, \"ListaPermisos\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Check","useAuth","PERMISOS","PERMISOS_LOCAL","ETIQUETAS_PERMISOS","jsxDEV","_jsxDEV","ListaPermisos","value","onChange","columnas","disabled","_s","authFetch","catalogo","setCatalogo","cancelado","cargar","resp","ok","data","json","Array","isArray","permissions","norm","map","p","id","name","filter","Boolean","_","lista","nombre","toggle","includes","x","className","children","perm","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Usuarios/FRANCO/Desktop/parroquav3/frontend/src/components/Modals/ListaPermisos.js"],"sourcesContent":["// src/components/Modals/ListaPermisos.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Check } from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { PERMISOS as PERMISOS_LOCAL, ETIQUETAS_PERMISOS } from '../../constants/permissions';\n\nconst ListaPermisos = ({ value = [], onChange, columnas = 2, disabled = false }) => {\n  const { authFetch } = useAuth();\n  const [catalogo, setCatalogo] = useState(PERMISOS_LOCAL);\n\n  useEffect(() => {\n    let cancelado = false;\n    const cargar = async () => {\n      try {\n        const resp = await authFetch('http://localhost:5000/api/permissions');\n        if (!resp.ok) return; // fallback a local\n        const data = await resp.json();\n        if (!cancelado && Array.isArray(data.permissions)) {\n          const norm = data.permissions.map((p) => {\n            if (typeof p === 'string') return p;\n            if (p && typeof p === 'object') return p.id || p.name || '';\n            return '';\n          }).filter(Boolean);\n          setCatalogo(norm);\n        }\n      } catch (_) {\n        // fallback silencioso a constantes locales\n      }\n    };\n    cargar();\n    return () => { cancelado = true; };\n  }, [authFetch]);\n\n  const lista = useMemo(() => catalogo.map((id) => ({ id, nombre: ETIQUETAS_PERMISOS[id] || id })), [catalogo]);\n\n  const toggle = (id) => {\n    if (disabled) return;\n    if (value.includes(id)) onChange?.(value.filter((x) => x !== id));\n    else onChange?.([...(value || []), id]);\n  };\n\n  return (\n    <div className={`grid grid-cols-1 md:grid-cols-${columnas} gap-2`}>\n      {lista.map((perm) => (\n        <div\n          key={perm.id}\n          className={`p-3 border-2 rounded-lg cursor-pointer transition-all ${\n            value.includes(perm.id) ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'\n          } ${disabled ? 'opacity-60 cursor-not-allowed' : ''}`}\n          onClick={() => toggle(perm.id)}\n        >\n          <div className=\"flex items-start gap-3\">\n            <div className=\"flex-shrink-0 mt-1\">\n              <div\n                className={`w-5 h-5 rounded border-2 flex items-center justify-center ${\n                  value.includes(perm.id) ? 'bg-blue-600 border-blue-600' : 'border-gray-300'\n                }`}\n              >\n                {value.includes(perm.id) && <Check className=\"w-3 h-3 text-white\" />}\n              </div>\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"font-medium text-gray-900\">{perm.nombre}</p>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ListaPermisos;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}