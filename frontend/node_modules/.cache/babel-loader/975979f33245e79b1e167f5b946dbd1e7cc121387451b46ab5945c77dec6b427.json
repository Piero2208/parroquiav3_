{"ast":null,"code":"var _jsxFileName = \"D:\\\\Usuarios\\\\FRANCO\\\\Desktop\\\\parroquav3\\\\frontend\\\\src\\\\components\\\\Form\\\\SelectorRol.js\",\n  _s = $RefreshSig$();\n// src/components/Modals/SelectorRol.js\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\n\n// Selector de roles con fetch al backend y fallback local.\n// Props: value, onChange, disabled\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectorRol = ({\n  value,\n  onChange,\n  disabled = false,\n  className = ''\n}) => {\n  _s();\n  const {\n    authFetch\n  } = useAuth();\n  const [roles, setRoles] = useState([]);\n  useEffect(() => {\n    let cancelado = false;\n    const cargar = async () => {\n      try {\n        const resp = await authFetch('http://localhost:5000/api/roles');\n        if (!resp.ok) return;\n        const data = await resp.json();\n        if (!cancelado) setRoles(Array.isArray(data.roles) ? data.roles : []);\n      } catch (_) {\n        // fallback silencioso\n      }\n    };\n    cargar();\n    return () => {\n      cancelado = true;\n    };\n  }, [authFetch]);\n  const options = roles.length ? roles.map(r => ({\n    value: r.name,\n    label: r.name\n  })) : [{\n    value: 'admin',\n    label: 'admin'\n  }, {\n    value: 'secretaria',\n    label: 'secretaria'\n  }, {\n    value: 'tesorero',\n    label: 'tesorero'\n  }, {\n    value: 'colaborador',\n    label: 'colaborador'\n  }, {\n    value: 'user',\n    label: 'user'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"select\", {\n    value: value || '',\n    onChange: e => onChange === null || onChange === void 0 ? void 0 : onChange(e.target.value),\n    disabled: disabled,\n    className: `w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${className}`,\n    children: options.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: opt.value,\n      children: opt.label\n    }, opt.value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(SelectorRol, \"486K6Losn0gskHbA7XEvABIaG9w=\", false, function () {\n  return [useAuth];\n});\n_c = SelectorRol;\nexport default SelectorRol;\nvar _c;\n$RefreshReg$(_c, \"SelectorRol\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","jsxDEV","_jsxDEV","SelectorRol","value","onChange","disabled","className","_s","authFetch","roles","setRoles","cancelado","cargar","resp","ok","data","json","Array","isArray","_","options","length","map","r","name","label","e","target","children","opt","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Usuarios/FRANCO/Desktop/parroquav3/frontend/src/components/Form/SelectorRol.js"],"sourcesContent":["// src/components/Modals/SelectorRol.js\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\n\n// Selector de roles con fetch al backend y fallback local.\n// Props: value, onChange, disabled\nconst SelectorRol = ({ value, onChange, disabled = false, className = '' }) => {\n  const { authFetch } = useAuth();\n  const [roles, setRoles] = useState([]);\n\n  useEffect(() => {\n    let cancelado = false;\n    const cargar = async () => {\n      try {\n        const resp = await authFetch('http://localhost:5000/api/roles');\n        if (!resp.ok) return;\n        const data = await resp.json();\n        if (!cancelado) setRoles(Array.isArray(data.roles) ? data.roles : []);\n      } catch (_) {\n        // fallback silencioso\n      }\n    };\n    cargar();\n    return () => { cancelado = true; };\n  }, [authFetch]);\n\n  const options = roles.length ? roles.map(r => ({ value: r.name, label: r.name })) : [\n    { value: 'admin', label: 'admin' },\n    { value: 'secretaria', label: 'secretaria' },\n    { value: 'tesorero', label: 'tesorero' },\n    { value: 'colaborador', label: 'colaborador' },\n    { value: 'user', label: 'user' },\n  ];\n\n  return (\n    <select\n      value={value || ''}\n      onChange={(e) => onChange?.(e.target.value)}\n      disabled={disabled}\n      className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${className}`}\n    >\n      {options.map(opt => (\n        <option key={opt.value} value={opt.value}>{opt.label}</option>\n      ))}\n    </select>\n  );\n};\n\nexport default SelectorRol;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,4BAA4B;;AAEpD;AACA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,GAAGA,CAAC;EAAEC,KAAK;EAAEC,QAAQ;EAAEC,QAAQ,GAAG,KAAK;EAAEC,SAAS,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC7E,MAAM;IAAEC;EAAU,CAAC,GAAGT,OAAO,CAAC,CAAC;EAC/B,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,IAAIc,SAAS,GAAG,KAAK;IACrB,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAMC,IAAI,GAAG,MAAML,SAAS,CAAC,iCAAiC,CAAC;QAC/D,IAAI,CAACK,IAAI,CAACC,EAAE,EAAE;QACd,MAAMC,IAAI,GAAG,MAAMF,IAAI,CAACG,IAAI,CAAC,CAAC;QAC9B,IAAI,CAACL,SAAS,EAAED,QAAQ,CAACO,KAAK,CAACC,OAAO,CAACH,IAAI,CAACN,KAAK,CAAC,GAAGM,IAAI,CAACN,KAAK,GAAG,EAAE,CAAC;MACvE,CAAC,CAAC,OAAOU,CAAC,EAAE;QACV;MAAA;IAEJ,CAAC;IACDP,MAAM,CAAC,CAAC;IACR,OAAO,MAAM;MAAED,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,CAACH,SAAS,CAAC,CAAC;EAEf,MAAMY,OAAO,GAAGX,KAAK,CAACY,MAAM,GAAGZ,KAAK,CAACa,GAAG,CAACC,CAAC,KAAK;IAAEpB,KAAK,EAAEoB,CAAC,CAACC,IAAI;IAAEC,KAAK,EAAEF,CAAC,CAACC;EAAK,CAAC,CAAC,CAAC,GAAG,CAClF;IAAErB,KAAK,EAAE,OAAO;IAAEsB,KAAK,EAAE;EAAQ,CAAC,EAClC;IAAEtB,KAAK,EAAE,YAAY;IAAEsB,KAAK,EAAE;EAAa,CAAC,EAC5C;IAAEtB,KAAK,EAAE,UAAU;IAAEsB,KAAK,EAAE;EAAW,CAAC,EACxC;IAAEtB,KAAK,EAAE,aAAa;IAAEsB,KAAK,EAAE;EAAc,CAAC,EAC9C;IAAEtB,KAAK,EAAE,MAAM;IAAEsB,KAAK,EAAE;EAAO,CAAC,CACjC;EAED,oBACExB,OAAA;IACEE,KAAK,EAAEA,KAAK,IAAI,EAAG;IACnBC,QAAQ,EAAGsB,CAAC,IAAKtB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAGsB,CAAC,CAACC,MAAM,CAACxB,KAAK,CAAE;IAC5CE,QAAQ,EAAEA,QAAS;IACnBC,SAAS,EAAE,6GAA6GA,SAAS,EAAG;IAAAsB,QAAA,EAEnIR,OAAO,CAACE,GAAG,CAACO,GAAG,iBACd5B,OAAA;MAAwBE,KAAK,EAAE0B,GAAG,CAAC1B,KAAM;MAAAyB,QAAA,EAAEC,GAAG,CAACJ;IAAK,GAAvCI,GAAG,CAAC1B,KAAK;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAuC,CAC9D;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CAAC;AAEb,CAAC;AAAC1B,EAAA,CAxCIL,WAAW;EAAA,QACOH,OAAO;AAAA;AAAAmC,EAAA,GADzBhC,WAAW;AA0CjB,eAAeA,WAAW;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}